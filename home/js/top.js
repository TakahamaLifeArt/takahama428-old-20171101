$(function(){$("#mainvisual .fl div:first").cycle({auto:!0,pager:"#nav",pause:5e3,speed:1500}),$("#contact ul li.firstli").hover(function(){$("img",this).stop(!0,!0).animate({opacity:"0.6"},500)},function(){$("img",this).stop(!0,!0).animate({opacity:"1"},500)}),jQuery.extend({calcEstimation:function(){var a=$('#item_id input[name="type"]:checked').attr("class"),b=$('#item_id input[name="type"]:checked').val(),c=$('#ink_count input[name="inks"]:checked').val(),d=$("#jquery-ui-slider-value").val()-0,e=1,f=0,g=0;d>149&&(g=d<300?1:2);var h=$.my[a][g],i=[];i[0]={itemid:b,amount:d,ink:c,pos:e,size:f};var j={act:"printfee",args:i,output:"jsonp",sheetsize:"1"};$.getJSON($.TLA.api+"?callback=?",j,function(c){if(h){var f=h*d+c.printfee,j=(Math.floor(f*(c.tax/100)),Math.floor(f*(1+c.tax/100)));$("#sum").val($.addFigure(j));var k=Math.ceil(j/d);$("#per").val($.addFigure(k))}else{var e={act:"price",amount:d,itemid:b,output:"jsonp"};$.getJSON($.TLA.api+"?callback=?",e,function(b){h=b[0].price_white,$.my[a][g]=b[0].price_white;var e=h*d+c.printfee,i=(Math.floor(e*(c.tax/100)),Math.floor(e*(1+c.tax/100)));$("#sum").val($.addFigure(i));var j=Math.ceil(i/d);$("#per").val($.addFigure(j))})}})},getDeliveryDays:function(a,b,c){var d=["","",""],e=$.my.schedule_date;e=Date.parse(e)/1e3;var f={act:"deliverydays",base:e,mode:b,transport:a};return $.ajax({async:!1,data:f,dataType:"json",success:function(a){var b=Date.parse(a[c]),e=new Date;e.setTime(b),d[0]=e.getMonth()+1,d[1]=e.getDate(),d[2]=a[4],d[3]=a[5]},type:"post",url:"/php_libs/orders.php"}),d},init:function(){var a=new Date;$.my.schedule_date=a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate(),$.calcEstimation()},my:{"polo-shirts":[0,0,0],schedule_date:"",sportswear:[0,0,0],sweat:[0,0,0],"t-shirts":[0,0,0]},showDeliveryDate:function(a){var b=$.getDeliveryDays(1,"simple",a);if($(".trans01","#deliveryday").text(b[0]+"/"+b[1]),b=$.getDeliveryDays(2,"simple",a),$(".trans02","#deliveryday").text(b[0]+"/"+b[1]),3!=a)$("#time_limit").text("13"),$("#deliveryday .tokyo").hide();else{$("#time_limit").text("11");var c=Date.parse(b[3]),d=new Date;d.setTime(c),$(".trans00","#deliveryday").text(d.getMonth()+1+"/"+d.getDate()),$("#deliveryday .tokyo").show()}}}),$("#plan_link").click(function(){$(".plan").hide(),$(".deliveryarea").fadeIn(2e3)}),$("#deliveryday").on("change",':radio[name="plan"]',function(){$.showDeliveryDate($(this).val())}),$(".icon_cross").click(function(){$(".deliveryarea").hide(),$(".plan").fadeIn(2e3)}),$('#item_id :radio[name="type"], #ink_count :radio[name="inks"]').change(function(){$.calcEstimation()}),$("#rankingtab li").click(function(){var a=$("#rankingtab li").index(this);$(".ranking_wrap").addClass("disnon"),$(".ranking_wrap").eq(a).removeClass("disnon"),$("#rankingtab li").removeClass("select"),$(this).addClass("select")}),$.datepicker.regional.ja={closeText:"閉じる",currentText:"今日",dateFormat:"yy/mm/dd",dayNames:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],dayNamesMin:["日","月","火","水","木","金","土"],dayNamesShort:["日","月","火","水","木","金","土"],firstDay:0,isRTL:!1,monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],nextText:"次>",prevText:"<前",showMonthAfterYear:!0,weekHeader:"週",yearSuffix:"年"},$.datepicker.setDefaults($.datepicker.regional.ja),$("#datepicker").datepicker({onSelect:function(a,b){$.my.schedule_date=a.replace(/-/g,"/");var c=Date.parse(a),d=new Date;d.setTime(c);var e=d.getMonth()+1,f=d.getDate(),g=["日","月","火","水","木","金","土"],h=g[d.getDay()];$("#deliveryday .otodoke .month").text(e),$("#deliveryday .otodoke .day").text(f),$("#deliveryday .otodoke .week").text(h),$.showDeliveryDate($(':radio[name="plan"]:checked',"#deliveryday").val())}}),$("#jquery-ui-slider").slider({max:300,min:0,range:"min",slide:function(a,b){$("#jquery-ui-slider-value").val(b.value)},step:10,stop:function(a,b){$.calcEstimation()},value:30}),$("#jquery-ui-slider-value").val($("#jquery-ui-slider").slider("value")),$("#jquery-ui-slider-value").change(function(){$("#jquery-ui-slider").slider("value",$(this).val()),$.calcEstimation()}),$.init()});